# apiVersion: v1
# kind: Namespace
# metadata:
#   name: {{ .Values.namespace }}
#   annotations:
#     argocd.argoproj.io/sync-wave: "-1"
#   labels:
#     argocd.argoproj.io/managed-by: openshift-gitops

{{ range $path, $_ :=  $.Files.Glob  (printf "namespace-spec/openshift/**.yaml" .Values.cluster ) }}
{{ $ns := ($.Files.Get $path ) | fromYaml }}
---
apiVersion: v1
kind: Namespace
metadata:
  name: {{ $ns.name }}
  {{- if $ns.labels }}
  labels:
    argocd.argoproj.io/managed-by: openshift-gitops
    {{- with $ns.labels }}
    {{- toYaml .  | nindent 4 }}
    {{- end }}
  {{- end }}
  annotations:
    argocd.argoproj.io/sync-wave: "-1"
    helm.sh/hook-weight: "10"
{{- end }}